---
schema: EconSchema
version: 1
aspectRatio: 1.5

params:

  - {name: x1, value: 2.2, min: 0, max: 5, round: 0.1}
  - {name: x2, value: 1.8, min: 0, max: 5, round: 0.1}
  - {name: s, value: 4, min: 0, max: 10}

  - {name: showMORE, value: false}
  - {name: showLESS, value: false}

calcs:
  u: (params.x1) * (params.x2) + (params.s) * ( (params.x1) + (params.x2) )

  u1: (0.5) * ( (0.5) + (2) * (params.s) )
  u2: (1) * ( (1) + (2) * (params.s) )
  u3: ( (1) * (2) ) + ( (params.s) * ( (1) + (2) ) )
  u4: (2) * ( (2) + (2) * (params.s) )
  u5: (2.5) * ( (2.5) + (2) * (params.s) )
  u6: (3) * ( (3) + (2) * (params.s) )
  u7: (3.5) * ( (3.5) + (2) * (params.s) )
  u8: (4) * ( (4) + (2) * (params.s) )
  u9: (4.5) * ( (4.5) + (2) * (params.s) )

  xequiv: ((2)+(params.s)*(3))/(params.s)

layout:
  OneGraphPlusSidebar:
    graph:

      xAxis:
        orient: bottom
        min: 0
        max: 5
        ticks: 0
      yAxis:
        orient: left
        min: 0
        max: 5
        ticks: 0


      objects:

      - Label:
            coordinates: [5, 0]
            text: "` \\\\text{Mele (kg)} `"
            yPixelOffset: 0
            position: l
      - Label:
            coordinates: [0, 5]
            text: "` \\\\text{Arance (kg)}  `"
            xPixelOffset: 0
            yPixelOffset: 10



      # Preferred and less preferred bundles
      - Area:
          fn:   ( (calcs.u) - params.s * (x) ) / ( (x) + params.s )
          fill: blue
          above: true
          show: params.showMORE == true
      - Area:
          fn:   ( (calcs.u) - params.s * (x) ) / ( (x) + params.s )
          fill: red
          above: false
          show: params.showLESS == true
          min: 0.001

      # Indifference Curve at X
      - Curve:
          fn:   ( (calcs.u) - params.s * (x) ) / ( (x) + params.s )
          color: Black
          strokeWidth: 2
      
      # Indifference Map
      - Curve:
          fn:   ((calcs.u1)-(params.s)*(x))/((x)+(params.s))
          color: Grey
          strokeWidth: 0.5
          min: 0.01
      - Curve:
          fn:   ((calcs.u2)-(params.s)*(x))/((x)+(params.s))
          color: Grey
          strokeWidth: 0.5
      - Curve:
          fn:   ((calcs.u3)-(params.s)*(x))/((x)+(params.s))
          color: Grey
          strokeWidth: 0.5
      - Curve:
          fn:   ((calcs.u4)-(params.s)*(x))/((x)+(params.s))
          color: Grey
          strokeWidth: 0.5
      - Curve:
          fn:   ((calcs.u5)-(params.s)*(x))/((x)+(params.s))
          color: Grey
          strokeWidth: 0.5
      - Curve:
          fn:   ((calcs.u6)-(params.s)*(x))/((x)+(params.s))
          color: Grey
          strokeWidth: 0.5
      - Curve:
          fn:   ((calcs.u7)-(params.s)*(x))/((x)+(params.s))
          color: Grey
          strokeWidth: 0.5
      - Curve:
          fn:   ((calcs.u8)-(params.s)*(x))/((x)+(params.s))
          color: Grey
          strokeWidth: 0.5
      - Curve:
          fn:   ((calcs.u9)-(params.s)*(x))/((x)+(params.s))
          color: Grey
          strokeWidth: 0.5

            
      # Bundle
      - Point:
          coordinates: [params.x1, params.x2]
          droplines:
            horizontal: params.x2.toFixed(1)
            vertical: params.x1.toFixed(1)
          color: Black
          r: 5
          draggable: true
      - Label:
          coordinates: [params.x1, params.x2+0.1]
          text: "` A `"
          position: l
          color: Black
          bgcolor: none
              


    explanation:
      divs:
        - html: "` Indicando rispettivamente con $X$ e $Y$ il consumo settimanale di mele 
                  e arance (entrambe misurate in chili), le preferenze del consumatore
                  sono descritte dalla funzione di utilità 
                  $$U(X,Y)=XY+${params.s}(X+Y)$$
                  Diversamente dall'Esempio 1, in questo caso le curve
                  d'indifferenza toccano gli assi. Per esempio, il paniere $(1,2)$
                  e il paniere $(${calcs.xequiv.toFixed(1)},0)$, che si trova
                  sull'asse orizzontale, appartengono alla stessa curva d'indifferenza
                  (entrambi danno un'utilità pari a ${((2)+(params.s)*(3))}).
                    `"
          show: params.s > 1
        - html: "` Indicando rispettivamente con $X$ e $Y$ il consumo settimanale di mele 
                  e arance (entrambe misurate in chili), le preferenze del consumatore
                  sono descritte dalla funzione di utilità 
                  $$U(X,Y)=XY+(X+Y)$$
                  Diversamente dall'Esempio 1, in questo caso le curve
                  d'indifferenza toccano gli assi. Per esempio, il paniere $(1,2)$
                  e il paniere $(${calcs.xequiv.toFixed(1)},0)$, che si trova
                  sull'asse orizzontale, appartengono alla stessa curva d'indifferenza
                  (entrambi danno un'utilità pari a ${((2)+(params.s)*(3))}).
                    `"
          show: params.s == 1
        - html: "` Indicando rispettivamente con $X$ e $Y$ il consumo settimanale di mele 
                  e arance (entrambe misurate in chili), le preferenze del consumatore
                  sono descritte dalla funzione di utilità 
                  $$U(X,Y)=XY$$
                  Tali preferenze sono identiche a quelle dell'Esempio 1 nel caso $a=b$.

                `"
          show: params.s == 0

    sidebar:

      controls:

      - title: Preferenze del consumatore per beni divisibili (Esempio 2)

        checkboxes:
        - param: showMORE
          label: "\\text{Mostra panieri preferiti ad $A$}"
        - param: showLESS
          label: "\\text{Mostra panieri cui $A$ è preferito}"

        sliders:
        - param: s
          label: s

        # divs:
        #   - html: "`  `"
        #     show: calcs.u < 0
