---
schema: EconSchema
version: 1
aspectRatio: 2
params:
- name: x
  value: 50
  min: 0
  max: 90
  round: 1
- name: y
  value: 60
  min: 5
  max: 90
  round: 1

calcs:
  z: ((params.x)^2)*(params.y)
  MUx: (2)*(params.x)*(params.y)

layout:
  MathboxPlusGraphPlusSidebar:
    mathbox:
      xAxis:
        min: 0
        max: 100
        step: 1
        title: Cibo
      yAxis:
        min: 0
        max: 100
        step: 1
        title: Alloggio
      zAxis:
        min: 0
        max: 729000
        step: 100
        title: Utilit√†

      objects:

# plane at Y = chosen level
      - MathboxPlane:
            y: params.y
            fill: colors.orange
            opacity: 0.2
            shaded: false

# intersection of plane with utility surface
      - MathboxCurve:
          fn:
            fn: " params.y "
            fnZ: "((x)^2)*(params.y)"
          strokeWidth: 5
          stroke: colors.red
          opacity: 0.4

      - MathboxFunctionSurface:
          fn:
            fn: "((x)^2)*(y)"
            samplePoints: 40
          shaded: false
          fill: colors.blue
          opacity: 0.4
      - MathboxPoint:
          x: params.x
          y: params.y
          z: calcs.z
          stroke: colors.blue
      - MathboxLine:
          x1: params.x
          x2: params.x
          y2: params.y
          stroke: colors.black
          strokeWidth: 10
          lineStyle: dotted
      - MathboxLine:
          y1: params.y
          x2: params.x
          y2: params.y
          stroke: colors.black
          strokeWidth: 10
          lineStyle: dotted
      - MathboxLine:
          x1: params.x
          y1: params.y
          x2: params.x
          y2: params.y
          z2: calcs.z
          stroke: colors.black
          strokeWidth: 10
          lineStyle: dotted





















    graph: 
      xAxis:
        max: 95
        ticks: 0
      yAxis:
        max: 729000
        ticks: 0

      objects:

        - Curve:
            fn: "((x)^2)*(params.y)"
            strokeWidth: 1.5
            color: Red
            opacity: 0.4
            label:
              text: "` U = ${params.y} X^2 `"
              x: 95
              position: c

        - Label:
              coordinates: [95, 0]
              text: "` \\\\text{kg} `"
              position: l
        - Label:
              coordinates: [0, 729000]
              text: "` \\\\text{Utilit√†}  `"

        - Point:
            coordinates: [params.x,calcs.z]
            droplines:
              vertical: params.x
              horizontal:
            strokeWidth: 0.5
            color: Blue
            r: 4

# tangent
        - Line:
            point: [params.x,calcs.z]
            slope: 2*(params.x)*(params.y)
            color: Blue
            min: (params.x)-35
            max: (params.x)+35
            strokeWidth: 0.8
            lineStyle: dashed








    sidebar:
      controls:
      - title: Utilit√† marginale del bene ùëã
        description: Scegliere un paniere per calcolare l'utilit√† marginale del bene <i>X</i>
                      in corrispondenza di quel paniere.
        sliders:
          - param: x
            label: X
          - param: y
            label: Y

        divs:
          - html: "` `"
          - html: "`L'utilit√† marginale del bene $X$ in corrispondenza del paniere $(${params.x},${params.y})$
                    √® la pendenza della curva rossa in corrispondenza di $X=${params.x}$ (= pendenza della retta 
                    tratteggiata):  $MU_X = ${(2)*(params.x)*(params.y)}$. `"

    explanation:

        divs:
          - html: "` `"
          - html: "` La funzione di utilit√† del consumatore √® $U(X,Y)=X^2Y$. Tenendo fermo il consumo del bene $Y$
                      a $Y=${params.y}$ unit√†, l'utilit√† diventa una funzione del solo consumo di $X$, ovvero
                      $U=${params.y}X^2$ (curva rossa). L'utilit√† marginale del bene $X$ √® la derivata
                      di questa funzione: $MU_X=${2*params.y}X$.   `"








